<div class="general-data-tab">
  <!-- SECCIÓN DE FOTO -->
  <div class="photo-section">
    <div class="photo-container">
      <div class="photo-preview" [class.has-image]="imagePreview()">
        @if (imagePreview()) {
        <img [src]="imagePreview()" alt="Driver photo" />
        <button type="button" class="remove-photo-icon" (click)="removePhoto()" title="Eliminar foto">
          <img src="assets/icons/circleXMarkIcon.svg" alt="Eliminar foto" width="32" height="32" />
        </button>
        } @else {
        <div class="photo-placeholder">
          <img src="assets/images/noAvatar.png" alt="No avatar" width="120" height="120" />
        </div>
        }
      </div>
      <div class="photo-actions">
        <label for="photoUpload" class="upload-button">
          {{ 'drivers.generalData.uploadPhoto' | translate }}
          <input type="file" id="photoUpload" accept="image/jpeg,image/jpg,image/png,image/gif"
            (change)="onFileSelected($event)" hidden />
        </label>
        <p class="upload-info">
          {{ 'drivers.generalData.photoUploadInfo' | translate }}
        </p>
      </div>
    </div>
  </div>

  <!-- FORMULARIO -->
  <div class="driver-form">
    <!-- FILA 1: NOMBRE, APELLIDOS, DNI/NIE, CIF -->
    <div class="form-row">
      <div class="form-field width-1-4">
        <label for="firstName" class="custom-field-label">
          {{ 'drivers.generalData.firstName' | translate }}
        </label>
        <input type="text" id="firstName" class="inputText" />
      </div>

      <div class="form-field width-1-4">
        <label for="lastName" class="custom-field-label">
          {{ 'drivers.generalData.lastName' | translate }}
        </label>
        <input type="text" id="lastName" class="inputText" />
      </div>

      <div class="form-field width-1-4">
        <label for="dniNie" class="custom-field-label">
          {{ 'drivers.generalData.dniNie' | translate }}
        </label>
        <input type="text" id="dniNie" class="inputText" />
      </div>

      <div class="form-field width-1-4">
        <label for="cif" class="custom-field-label">
          {{ 'drivers.generalData.cif' | translate }}
        </label>
        <input type="text" id="cif" class="inputText" />
      </div>
    </div>

    <!-- FILA 2: DIRECCIÓN, CÓDIGO POSTAL, CIUDAD, PROVINCIA, PAÍS -->
    <div class="form-row">
      <div class="form-field width-1-2">
        <label for="fullAddress" class="custom-field-label">
          {{ 'drivers.generalData.fullAddress' | translate }}
        </label>
        <input type="text" id="fullAddress" class="inputText" />
      </div>

      <div class="form-field width-1-8">
        <label for="postalCode" class="custom-field-label">
          {{ 'drivers.generalData.postalCode' | translate }}
        </label>
        <input type="text" id="postalCode" class="inputText" (input)="onlyNumAndSymnbolInput($event)" />
      </div>

      <div class="form-field width-1-8">
        <label for="city" class="custom-field-label">
          {{ 'drivers.generalData.city' | translate }}
        </label>
        <input type="text" id="city" class="inputText" />
      </div>

      <div class="form-field width-1-8">
        <label for="province" class="custom-field-label">
          {{ 'drivers.generalData.province' | translate }}
        </label>
        <input type="text" id="province" class="inputText" />
      </div>

      <div class="form-field width-1-8">
        <label for="country" class="custom-field-label">
          {{ 'drivers.generalData.country' | translate }}
        </label>
        <select id="country" class="inputSelect">
          <option value="">{{ 'drivers.generalData.selectCountry' | translate }}</option>
          @for (country of countries(); track country.code) {
          <option [value]="country.code">{{ country.name }}</option>
          }
        </select>
      </div>
    </div>

    <!-- FILA 3: CORREO, TELÉFONO -->
    <div class="form-row">
      <div class="form-field width-1-2">
        <label for="email" class="custom-field-label">
          {{ 'drivers.generalData.email' | translate }}
        </label>
        <input type="email" id="email" class="inputText" />
      </div>

      <div class="form-field width-1-2">
        <label for="phone" class="custom-field-label">
          {{ 'drivers.generalData.phone' | translate }}
        </label>
        <input type="tel" id="phone" class="inputText" (input)="onlyNumAndSymnbolInput($event)" />
      </div>
    </div>

    <!-- FILA 4: TAGS, ACTIVAR/DESACTIVAR, BLOQUEAR MISIONES -->
    <div class="form-row">
      <div class="form-field width-1-2">
        <input-multi-tag [label]="'drivers.generalData.tags' | translate" [value]="selectedTagIds()"
          [tagType]="'DRIVER'" (valueChange)="onTagsChange($event)"></input-multi-tag>
      </div>

      <div class="form-field width-1-6 checkbox-field">
        <label class="checkbox-label">
          <input type="checkbox" class="inputCheckbox" />
          <span>{{ 'drivers.generalData.isActive' | translate }}</span>
        </label>
      </div>

      <div class="form-field width-1-4 checkbox-field">
        <label class="checkbox-label">
          <input type="checkbox" class="inputCheckbox" />
          <span>{{ 'drivers.generalData.blockMissions' | translate }}</span>
        </label>
      </div>
    </div>

    <!-- BOTÓN GUARDAR -->
    <div class="form-actions">
      <button type="button" class="save-button" (click)="onSaveChanges()">
        {{ 'drivers.generalData.saveChanges' | translate }}
      </button>
    </div>
  </div>
</div>