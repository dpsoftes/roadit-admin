<h1>{{'clients.create-group-title' | translate}}</h1>

<mat-card>
    <mat-card-content>
        <form [formGroup]="groupForm" (ngSubmit)="onSave()">
        <mat-form-field appearance="outline">
            <mat-label>{{'clients.create-group.name' | translate}}</mat-label>
            <input type="text" matInput formControlName="name">
            <mat-error *ngIf="groupForm.get('name')?.invalid && groupForm.get('name')?.touched">
                El nombre es requerido
            </mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline">
            <mat-label>{{'clients.create-group.country' | translate}}</mat-label>
            <input type="text" matInput formControlName="country">
            <mat-error *ngIf="groupForm.get('country')?.invalid && groupForm.get('country')?.touched">
                El paÃ­s es requerido
            </mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline" class="users-field">
            <mat-label>{{'clients.create-group.assigned-admins' | translate}}</mat-label>
            <mat-select 
                multiple 
                formControlName="assigned_admins"
                class="users-select">
                @for (admin of availableAdmins(); track admin.id) {
                    <mat-option [value]="admin.id">{{ admin.name }} {{ admin.lastname }}</mat-option>
                }
            </mat-select>
            
            @if (selectedAdmins.length > 0) {
                <div class="chips-spacer">
                    @for (admin of selectedAdmins; track admin.id) {
                        <div class="chip-placeholder">{{ admin.name }} {{ admin.lastname }}</div>
                    }
                </div>
                <div class="chips-container">
                    @for (admin of selectedAdmins; track admin.id) {
                        <mat-chip class="user-chip">
                            {{ admin.name }} {{ admin.lastname }}
                        </mat-chip>
                    }
                </div>
            }
        </mat-form-field>
        </form>
    </mat-card-content>
    <mat-card-footer>
        <div class="buttons-container">
            <app-buttons type="save-changes" text="clients.create-group.save" (onClick)="onSave()"></app-buttons>
            <app-buttons type="cancel" text="clients.create-group.cancel" (onClick)="onCancel()"></app-buttons>
        </div>
    </mat-card-footer>
</mat-card>